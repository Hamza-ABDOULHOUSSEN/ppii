<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Concours Mines-Telecom</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename="assets/favicon.ico") }}"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link rel="stylesheet" href="{{ url_for('static', filename="css/styles.css") }}"/>
    {% from "_formhelpers.html" import render_field %}
</head>
<body>
<h1 class="site-heading text-center text-white d-none d-lg-block">
    <span class="site-heading-upper text-primary mb-3">Consultation des données</span>
    <span class="site-heading-lower">Concours Mines-Telecom</span>
</h1>
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
    <div class="container">
        <a class="navbar-brand text-uppercase text-expanded font-weight-bold d-lg-none" href="index.html">Menu</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span
                class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item px-lg-4">
                    <a class="nav-link text-uppercase text-expanded" href="/">
                        Accueil
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item px-lg-4"><a class="nav-link text-uppercase text-expanded" href="/about">A propos
                    de</a></li>
                <li class="nav-item active px-lg-4"><a class="nav-link text-uppercase text-expanded" href="/candidats">Candidats</a>
                </li>
                <li class="nav-item px-lg-4"><a class="nav-link text-uppercase text-expanded" href="/resultats">Résultats</a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<section class="page-section">
    <div class="container">
        <div class="row bg-faded p-5 rounded mr-auto">
            <article class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                <div class="list-group" id="elementList" role="tablist">
                    <a class="list-group-item list-group-item-action active" data-bs-toggle="list" href="#id"
                       role="tab">ID</a>
                    <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#ine"
                       role="tab">INE</a>
                    <a class="list-group-item list-group-item-action" data-bs-toggle="list" href="#name" role="tab">Nom
                        & Prénom</a>
                </div>
            </article>
            <article class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
                <div class="tab-content">
                    <div class="tab-pane active" id="id">
                        <h2>Recherche par ID</h2>
                        <form action="/candidats" method="get">
                            <dl>
                                {{ render_field(idForm.id) }}
                            </dl>
                            <p><input class="btn btn-outline-secondary" id="id" type="submit" value="Recherche"></p>
                        </form>
                    </div>
                    <div class="tab-pane" id="ine">
                        <h2>Recherche par INE</h2>
                        <form action="/candidats" method="get">
                            <dl>
                                {{ render_field(ineForm.INE) }}
                            </dl>
                            <p><input class="btn btn-outline-secondary" id="ine" type="submit" value="Recherche"></p>
                        </form>
                    </div>
                    <div class="tab-pane" id="name">
                        <h2>Recherche par nom - prénom</h2>
                        <form action="/candidats" method="get">
                            <dl>
                                {{ render_field(nameForm.name) }}
                                {{ render_field(nameForm.FirstName) }}
                            </dl>
                            <p><input class="btn btn-outline-secondary" id="name" type="submit" value="Recherche"></p>
                        </form>
                    </div>
                </div>
            </article>
        </div>
    </div>
</section>
<div class="page-section">
    {% if query != "none" %}
        <section class="page-section">
            <div class="container bg-faded p-5 rounded mr-auto">
                <div class="row">
                    <h3 class="bg-faded rounded p-2 mr-auto text-uppercase border">
                        {% if query == "name" %}
                            Recherche par nom : {{ request.args["FirstName"] }} {{ request.args["name"] }}
                        {% elif query == "id" %}
                            Recherche avec un ID : {{ request.args["id"] }}
                        {% elif query == "INE" %}
                            Recherche avec un INE : {{ request.args["INE"] }}
                        {% endif %}
                    </h3>
                </div>
                {% if count == 0 %}
                    <p>Il n'y a aucun résultat.</p>
                {% elif count > 1 %}
                    <p>Il y a {{ count }} résultats.</p>
                {% endif %}

                {% for res in result %}
                    {% if count != 1 %}
                        <div class="rounded bg-light p-1 mr-auto text-uppercase border">
                            <h4>Résultat n°{{ loop.index }}</h4>
                        </div>
                    {% endif %}
                    <div class="row">
                        {% for element in res %}
                            <div class="card bg-light mx-auto" style="width: 50rem;">
                                <div class="card-body">
                                    <h5 class="card-title">{{ tags[loop.index0] }}</h5>
                                    {# permet de faire la distinction entre l'affichage des voeux et les autres informations #}
                                    {% if tags[loop.index0] == 'Vœux' %}
                                        {% if element %}
                                            <ol>
                                                {% for line in element %}
                                                    <li>{{ line }}</li>
                                                {% endfor %}
                                            </ol>
                                        {% else %}
                                            <p class="alert-danger p-1 mr-auto border">Aucun vœu</p>
                                        {% endif %}
                                    {% else %}
                                        <ul>
                                            {% for line in element %}
                                                <li type="circle">{{ line }}</li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        </section>
    {% endif %}
</div>


<footer class="footer text-faded text-center py-5">
    <div class="container"><p class="m-0 small">Copyright © Concours Mines-Telecom<br>Site web réalisé par Lucas GOUIN,
        Hamza ABDOULHOUSSEN et Benjamin LAVANDIER</p></div>
</footer>
<!-- Bootstrap core JS-->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="{{ url_for('static',filename='js/bootstrap.js') }}"></script>
<script src="{{ url_for('static',filename='js/scripts.js') }}"></script>
</body>
</html>
